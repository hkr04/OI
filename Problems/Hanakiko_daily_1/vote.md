## 投票

### 题目背景

Hanakiko是一个热心的女孩子，她参加了朝花中学01社，并负责01社的组织工作。她的工作卓有成效，获得大家的广泛赞许。

现在01社要就一些议案进行投票，Hanakiko要负责统计投票结果。然而社员们的意见种类多样，处理起来非常麻烦，Hanakiko十分头痛。在好几次失败的尝试后，她无奈之下找到了你，希望你能帮助她统计这些意见。你能帮帮她么？

### 题目描述

听听Kiko酱是怎么说的吧。

“01社共有$n$名社员，每位社员的威望值不一样，第$i(1\le i \le n)$位社员的威望值为$a_i$。现在有$m$个议案，分别编号为$1,2,\cdots,m$，社员们对于这些议案发表了自己的看法。“

“看法一共有$4$种：

1. 我支持第$p_i$个议案。

2. 我反对第$q_i$个议案。

3. 我认为通过的议案的总数应至少为$r_i$个。

4. 我认为通过的议案的总数应至多为$s_i$个。

这么多种意见，真是好难处理啊……”

“投票需要结果，01社要决定每个议案是否能通过。如果最终的结果与第$i$位社员的意见相符，那么就会得到这位社员的赞同。俗话说，少数服从多数。为了让大多数人满意，我需要计算出**赞同者威望值之和的最大值**。可我试了好多次，总是不知道怎么算。明天就要让社员知道结果了，这可怎么办啊？“

”您可以帮帮我吗？真是太感谢您了……“

## 分班

### 题目背景

自从上次Hanakiko完美解决了投票问题后，她就成为了01社最受欢迎的社员，大家有什么事都来找她。虽说她很热心，但是有些事她也忙不过来，经常需要向你求助。

这次，01社接到了任务。朝花中学高一年级要进行重新分班，很多同学都提出了自己的愿望，每名同学都希望进入自己梦想的班级。现在年级想要最大限度地满足同学们的要求，于是就找到01社，请他们求出最优方案。

作为01社的带头人，Kiko酱自然是~~首当其冲~~ 一马当先，可是她又遇到了困难，这可怎么办呢？

### 题目描述

“我们年级有$n$名同学，要分到$m$个班。年级规定，第$i(1\le i\le m)$个班的人数不能超过$a_i$人。现在每名同学都提出了自己的愿望，第$j$名同学的愿望是这样的：我希望进入以下$b_j$个班中的任意一个：$c_{j,1},c_{j,2},\cdots,c_{j,b_j}$。”

“年级要尽可能地满足同学们的要求。现在我们要制定一个分班方案，使得愿望被满足的同学的总人数最大。可是这么多同学，这么多班……怎么安排好呢？”

“真是不好意思，又麻烦您了，真的非常感谢您，帮我这么多次……”

匈牙利$\text{O}(nm)$，Dinic $\text{O}(\sqrt{n}m)$。

## 项链

### 题目背景

情人节马上就要到了，Hanakiko想要为Sweetlemon买项链作为情人节礼物。她在网店选好了喜欢的款式，并决定买相同的两串，一串送给Sweetlemon，另一串则留给自己。可是，似乎网店发货的时候出了偏差，此时已经来不及调换了，Hanakiko可着急了，这该怎么办呢？

### 题目描述

“我买了两串项链，可是快递发出$1$天后，网店告诉我，他们把项链发错了。然而离情人节只有短短几天了，再调换肯定是来不及了，我又不想让Sweetlemon失望……”

“我向网店了解了，发货时他们仓库里的项链一共有$n$串，这些项链是由$t(1\le t \le 52)$种不同的珍珠串成的，第$i(1\le i \le n)$串项链的长度为$l_i$。网店发给我一个存货列表，在列表里，第$i$串项链是由一个长度为$l_i$的只含大小写英文字母的字符串$s_i$表示的。相同的字母代表相同的珍珠，不同的字母代表的珍珠不同。对第$i$串项链，网店的工作人员会从任意一颗珍珠开始，**按逆时针方向**数一圈，记下经过的珍珠，得到字符串$s_i$。比如，下面的项链可以用字符串`abcd`代表，也可以用字符串`bcda`, `cdab`, `dabc`代表。”

![项链](https://cdn.luogu.org/upload/pic/50732.png)

“因为项链可以**在平面内**旋转（不能翻转），所以只要两串项链中的一串经过某一旋转后可以与另一串完全重合，那么这两串项链就是相同的。例如，用`abc`代表的项链和用`bca`或`cab`代表的项链是相同的，但和用`bac`代表的项链是不同的。”

“网店工作人员说，他们从这$n$串项链中**随机**拿了两串发货。现在我希望知道，网店发来的两串项链相同的概率是多少？”

“我知道您很忙，可是这件事太紧急了，我不知道找谁帮忙了，所以只好找到您……您可以，再帮我一次么……”

