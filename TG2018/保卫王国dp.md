## 保卫王国 $\text{dp}$

状态转移方程

$f[i][0]=\sum f[j][1]$

$f[i][1]=\sum \min(f[j][0],f[j][1])$

另加一个链$\text{dp}$。

$jf[k][i][x][y]$表示从$i$开始，到$i$的第$j=2^k$层父亲，$j$的状态为$x$，$i$的状态为$y$，$j$为根的子树减去$i$为根的子树的最小代价。

先计算$jf[0][i][x][y]$，再通过枚举中点的状态递推到$jf[lg][i][x][y]$。

计算答案方法：  
讨论LCA与$a,b$的关系。  
如果LCA是$a,b$中的一个，那么就由深度较大的一个点跳到LCA处，再由LCA跳到根求解。  
否则就由两个点分别跳到LCA的直接儿子处，讨论直接儿子的选择状态，再由LCA跳到根求解。
